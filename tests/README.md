# –¢–µ—Å—Ç—ã HSE ML Contrast Checker

–ù–∞–±–æ—Ä —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ __init__.py              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ conftest.py              # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ test_webapp.py           # –¢–µ—Å—Ç—ã –¥–ª—è FastAPI –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ test_slide_scraper.py    # –¢–µ—Å—Ç—ã –¥–ª—è –º–æ–¥—É–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–ª–∞–π–¥–æ–≤
‚îî‚îÄ‚îÄ README.md                # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -r requirements-dev.txt
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã

```bash
pytest
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º

```bash
pytest -v
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞

```bash
pytest --cov=src --cov-report=html --cov-report=term-missing
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª

```bash
pytest tests/test_webapp.py
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å

```bash
pytest tests/test_webapp.py::TestHealthEndpoint
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç

```bash
pytest tests/test_webapp.py::TestHealthEndpoint::test_health_check
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ø–æ –º–∞—Ä–∫–µ—Ä–∞–º

```bash
# –¢–æ–ª—å–∫–æ API —Ç–µ—Å—Ç—ã
pytest -m api

# –¢–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã scraper
pytest -m scraper

# –ò—Å–∫–ª—é—á–∏—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
pytest -m "not slow"
```

## –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### Unit —Ç–µ—Å—Ç—ã
- `test_slide_scraper.py` - –¢–µ—Å—Ç—ã –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è

### Integration —Ç–µ—Å—Ç—ã
- `test_webapp.py` - –¢–µ—Å—Ç—ã API endpoints —Å –º–æ–∫–∞–º–∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

## –§–∏–∫—Å—Ç—É—Ä—ã

–û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `conftest.py`:

- `temp_dir` - –í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤
- `sample_slide_html` - –ü—Ä–∏–º–µ—Ä HTML —Å–ª–∞–π–¥–∞
- `sample_multi_slide_html` - –ü—Ä–∏–º–µ—Ä HTML —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª–∞–π–¥–∞–º–∏
- `sample_slide_json` - –ü—Ä–∏–º–µ—Ä JSON –¥–∞–Ω–Ω—ã—Ö —Å–ª–∞–π–¥–∞
- `sample_analysis_result` - –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞
- `html_file` - –í—Ä–µ–º–µ–Ω–Ω—ã–π HTML —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
- `multi_slide_html_file` - –í—Ä–µ–º–µ–Ω–Ω—ã–π HTML —Ñ–∞–π–ª —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª–∞–π–¥–∞–º–∏

## –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤–∫–ª—é—á–∞–µ—Ç:

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–æ
- `src/webapp.py` - FastAPI endpoints
- `src/slide_scraper.py` - –§—É–Ω–∫—Ü–∏–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–ª–∞–π–¥–æ–≤

### üìä –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç–æ
- `src/slide_scraper_advanced.py` - –¢—Ä–µ–±—É–µ—Ç –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ Selenium

### ‚è≥ –ù–µ –ø–æ–∫—Ä—ã—Ç–æ
- `src/contrast_checker.py` - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
- `src/image_analyzer.py` - ML –∞–ª–≥–æ—Ä–∏—Ç–º—ã
- `src/wcag.py` - WCAG —Ä–∞—Å—á—ë—Ç—ã
- `src/report_generator.py` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –æ—Ç—á—ë—Ç–æ–≤

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è

```python
# tests/test_new_module.py
import pytest
from src.new_module import my_function


class TestMyFunction:
    """Tests for my_function."""

    def test_basic_functionality(self):
        """Test basic usage."""
        result = my_function("input")
        assert result == "expected_output"

    def test_edge_case(self):
        """Test edge case."""
        with pytest.raises(ValueError):
            my_function(None)
```

## Continuous Integration

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏:
- Push –≤ main –≤–µ—Ç–∫—É
- –°–æ–∑–¥–∞–Ω–∏–∏ Pull Request
- –†—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ workflow

## –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ

```bash
pytest -x
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –≤—ã–≤–æ–¥–æ–º print statements

```bash
pytest -s
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å Python debugger

```bash
pytest --pdb
```

### –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

```bash
pytest -l
```

## Best Practices

1. **–û–¥–∏–Ω —Ç–µ—Å—Ç - –æ–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞**: –ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—â—å
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–¥ —á–µ—Ä–µ–∑ —Ñ–∏–∫—Å—Ç—É—Ä—ã –≤ conftest.py
3. **–ú–æ–∫–∏—Ä—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pytest-mock –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤
4. **–ü–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è**: –ò–º–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –æ–ø–∏—Å—ã–≤–∞—Ç—å —á—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è
5. **Docstrings**: –î–æ–±–∞–≤–ª—è–π—Ç–µ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —á—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ—Å—Ç

## Troubleshooting

### –¢–µ—Å—Ç—ã –Ω–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
- –§–∞–π–ª—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `test_*.py` –∏–ª–∏ `*_test.py`
- –§—É–Ω–∫—Ü–∏–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `test_*()`
- –ö–ª–∞—Å—Å—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `Test*`

### Import –æ—à–∏–±–∫–∏

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ editable mode
pip install -e .
```

### –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π

```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
rm -rf venv
python -m venv venv
source venv/bin/activate  # –∏–ª–∏ venv\Scripts\activate –Ω–∞ Windows
pip install -r requirements-dev.txt
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Pytest –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.pytest.org/)
- [FastAPI —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](https://fastapi.tiangolo.com/tutorial/testing/)
- [pytest-mock](https://pytest-mock.readthedocs.io/)
